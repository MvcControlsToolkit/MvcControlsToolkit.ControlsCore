(function(){(function(){var u=this||(0,eval)("this");(function(k){if("function"===typeof define&&define.amd)define(["../mvcct.controls","../../mvcct-enhancer/mvcct.enhancer.min"],k);else if("object"===typeof exports&&"object"===typeof module)module.exports=k(require("../mvcct.controls"),require("mvcct-enhancer"));else{var p=u.mvcct=u.mvcct||{};k(p.controls,p.enhancer)}})(function(k,p){function v(b,a,c,d,f,e,g,k,l){r[b]={g:c,f:l,j:a,onerror:f,onprogress:k,c:e,l:g,b:d}}function w(b,a){if(b&&a)for(var c=
0;c<a.length;c++){var d=document.createElement("LI");d.appendChild(document.createTextNode(a[c]));b.appendChild(d)}}function I(b,a){if(b&&b.length){var c=q(a);if(c){var d=c.querySelector(x),f;d&&(n(d),d.classList.remove(y),d.classList.add(z),f=document.createElement("UL"),d.appendChild(f));b.map(function(a){if(a.prefix){var b=c.querySelector('[name="'+a.prefix+'"]');b?(b.classList.add(t),(b=A(b,c))?(b.classList.add(B),b.classList.remove(C),b.appendChild(document.createTextNode(a.errors[0]))):w(f,
a.errors)):w(f,a.errors)}else w(f,a.errors)})}}}function H(b){if(b=q(b)){var a=b.querySelector(x);if(a){n(a);a.classList.remove(z);a.classList.add(y);for(var a=b.querySelectorAll("."+t),c=0;c<a.length;c++){var d=a[c];d.classList.remove(t);if(d=A(d,b))d.classList.remove(B),d.classList.add(C),n(d)}}}}function q(b){for(;b&&b.getAttribute;b=b.parentNode)if("FORM"==b.tagName)return b;return null}function D(b,a){if(b&&"object"===typeof b)for(var c in b)b.hasOwnProperty(c)&&a.setRequestHeader(c,b[c])}jQuery=
u.jQuery;var l,n,E,F,G,x,y,z,t,C,B,A,r={};k.addHtmlEndpoint=function(b,a,c,d,f,e){v(b,null,null,d,f,a,c,e)};k.addRouterEndpoint=function(b,a){v(b,null,a,null,null,null,null,null)};k.addJsonEndpoint=function(b,a,c,d,f,e,g,k){v(b,c,null,d,f,e,g,k,a)};k.removeEndpoint=function(b){delete r[b]};k.postJson=function(b,a,c,d,f,e,g,k,l,n){var m=new XMLHttpRequest;m.open("POST",a,!0);m.setRequestHeader("Content-type","application/json");d&&m.setRequestHeader("Authorization","Bearer "+d);D(n,m);m.onload=function(){200!=
m.status?(k?k(b):null,g?g(e?e(m.status):""):null):(f(JSON.parse(m.responseText)),k?k(b):null)};m.onerror=function(){k?k(b):null;g?g(e?e(m.status):""):null};m.onprogress=l;m.send(JSON.stringify(c))};k.getContent=function(b,a,c,d,f,e,g,k,l,n,m){var h=new XMLHttpRequest;h.open(n||"GET",a,!0);c&&h.setRequestHeader("Authorization","Bearer "+c);m&&h.setRequestHeader("Content-type","application/x-www-form-urlencoded");D(l,h);h.onload=function(){h.responseText&&"#"==h.responseText.charAt(0)?(g?g(b):null,
e?e(h.responseText.substring(1)):null):200!=h.status?(g?g(b):null,e?e(f?f(h.status):""):null):(d(h.responseText),g?g(b):null)};h.onerror=function(){g?g(b):null;e?e(f?f(h.status):""):null};h.onprogress=k;m?h.send(m):h.send()};k.postForm=function(b,a,c,d,f,e,g,l,n,p){var m=q(b);if(E(m)){n&&n(b);k.clearErrors(b);var h=new XMLHttpRequest;a=a||m.getAttribute("action");n=[].filter.call(m.elements,function(a){return"radio"!=a.type&&"checkbox"!=a.type||a.checked}).filter(function(a){return!!a.name}).filter(function(a){return!a.disabled}).map(function(a){return encodeURIComponent(a.name)+
"="+encodeURIComponent(a.value)}).join("&");c&&(n?n=n+"&"+c:n=c);h.open("POST",a,!0);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");D(p,h);h.onload=function(){if(h.responseText&&"["==h.responseText.trim().charAt(0)){var a=JSON.parse(h.responseText);0<a.length&&F(a,m);g?g(b):null}else h.responseText&&"#"==h.responseText.charAt(0)?(g?g(b):null,e?e(h.responseText.substring(1)):null):200!=h.status?(g?g(b):null,e?e(f?f(h.status):""):null):(d(h.responseText),g?g(b):null)};h.onerror=
function(){g?g(b):null;e?e(f?f(h.status):""):null};h.onprogress=l;h.send(n)}};p.register(null,null,function(b){l=b.ajax=b.ajax||{};n=l.empty=l.empty||function(a){if(a)if(jQuery){var b=jQuery(a);if(jQuery.validator&&(a=q(a))&&(a=jQuery.data(a,"validator"))&&(a=a.settings)){var d=a.rules;b.find("[data-val=true]").each(function(){delete d[this.name]})}b.empty()}else a.innerHTML=""};E=l.validateForm=l.validateForm||function(a){return jQuery&&jQuery.validator?jQuery(a).closest("form").validate().form():
!0};G=l.clearErrors||H;F=l.dispatchServerErrors||I;G=l.clearErrors||H;x=l.validationSummarySelector||'[data-valmsg-summary="true"], [data-valmsg-ajax="true"]';y=l.validationSummaryValidClass||"validation-summary-valid";z=l.validationSummaryInvalidClass||"validation-summary-errors";t=l.fieldErrorClass||"input-validation-error";C=l.errorLabelValidClass||"field-validation-valid";B=l.errorLabelInvalidClass||"field-validation-error";A=l.errorLabelLocator||function(a,b){return(b=b||q(a))?b.querySelector('[data-val-msg-for="'+
a.name+'"]'):null};k.dispatchServerErrors=F;k.clearErrors=G;k.validateForm=E;b=b.serverWidgets=b.serverWidgets||{};b=b.modal=b.modal||{};b.openModal=b.openModal||function(a,b,d){var f=document.getElementById(b);f?(f.firstChild.expando_onSubmit=null,f.firstChild.expando_onSubmitError=null,n(f),f.setAttribute("data-version",d),f.appendChild(a)):(f=document.createElement("DIV"),f.setAttribute("id",b),f.setAttribute("data-version",d),f.appendChild(a),document.body.appendChild(f));p.transform(f);jQuery(a).modal({show:!1,
h:"static"});a.getAttribute("data-destroy-on-close")&&jQuery(a).i("hidden.bs.modal",function(){a.expando_onSubmit=null;a.expando_onSubmitError=null;n(a.parentNode);a.parentNode.parentNode.removeChild(a.parentNode)});jQuery(a).modal("show")};b.closeModal=b.closeModal||function(a){jQuery(a).modal("hide");a.expando_onSubmit=null;a.expando_onSubmitError=null};b.openStaticModal=b.openStaticModal||function(a){var b=jQuery(a);a.expando_created||(b.show(),jQuery(a).modal({show:!1,h:"static"}),jQuery(a).i("hidden.bs.modal",
function(){a.expando_onSubmit=null;a.expando_onSubmitError=null}));jQuery(a).modal("show")};b.closeStaticModal=b.closeStaticModal||function(a){jQuery(a).modal("hide");a.expando_onSubmit=null;a.expando_onSubmitError=null}},"ajax",null);k.addOperation("ajax-html_click",function(b){var a=b.href,c=b.target,d=b.args,f=d[0],e=b.proc||1<d.length?r(d[1]):{},g=new XMLHttpRequest;g.open("GET",a||c.getAttribute("href"),!0);g.onload=function(){g.responseText&&"#"==g.responseText.charAt(0)?(e.a?e.a(c):null,e.onerror?
e.onerror(g.responseText.substring(1)):null):200!=g.status?(e.a?e.a(c):null,e.onerror?e.onerror(c.getAttribute("data-error-message")||""):null):(c=document.getElementById(f),n(c),c.innerHTML=g.responseText,p.transform(c),e.a?e.a(c):null)};g.onerror=function(){e.a?e.a(c):null;e.onerror?e.onerror(c.getAttribute("data-error-message")||""):null};e.c?e.c(c):null;g.send()});k.addOperation("ajax-json_click",function(b){var a=b.target,c=r[b.args[0]];if(c.g)c.g(a.getAttribute("href"));else{var d=new XMLHttpRequest;
d.open("GET",a.getAttribute("href"),!0);c.f&&d.setRequestHeader("Authorization","Bearer "+c.f);d.onload=function(){200!=d.status?(c.a?c.a(a):null,c.onerror?c.onerror(c.b?c.b(d.status):""):null):(c.j(JSON.parse(d.responseText)),c.a?c.a(a):null)};d.onerror=function(){c.a?c.a(a):null;c.onerror?c.onerror(c.b?c.b(d.status):""):null};d.onprogress=c.onprogress;c.c?c.c(a):null;d.send()}});return k})})()})();

(function(){(function(){var l=this||(0,eval)("this");(function(g){if("function"===typeof define&&define.amd)define(["../mvcct.controls","../../mvcct-enhancer/mvcct.enhancer.min","../../awesomplete/awesomplete.min"],g);else if("object"===typeof exports&&"object"===typeof module)module.exports=g(require("../mvcct.controls"),require("mvcct-enhancer"),require("awesomplete"));else{var h=l.mvcct=l.mvcct||{};g(h.controls,h.enhancer,l.Awesomplete)}})(function(g,h,x){function r(a){var b=document.createEvent("HTMLEvents");
b.initEvent("blur",!0,!0);a.dispatchEvent(b);b=document.createEvent("HTMLEvents");b.initEvent("change",!0,!0);a.dispatchEvent(b);k&&k.validator&&(a=k(a),(b=a.closest("form").validate())&&b.element(a))}var m,k=l.jQuery,t={};h.register(null,null,function(a){a=a.serverWidgets||{};m=a.autocomplete||{}},"server autocomplete",null);g.addOperation("autocomplete_focus",function(a){var b=a.target,d=a.args;if(b.getAttribute("data-enhanced-autocomplete"))b.value="";else{b.setAttribute("data-enhanced-autocomplete",
"true");var c;for(c=b.nextSibling;c&&1!=c.nodeType;c=c.nextSibling);if(c){b.setAttribute("data-last-value",b.value);c.setAttribute("data-last-value",c.value);b.value="";var h="true"==d[5];a="function"===typeof m?m(target):m;var f,p=a.removeDiacritics?g.removeDiacritics:function(b){return b},u=g.removeDiacritics,n=t[d[2]],v=parseInt(d[4]),w=parseInt(d[3]);n||(t[d[2]]=n=new g.searchDictionary(d[0],v,w,a.maxCacheSize));var q=new x(b,{minChars:v,maxItems:w,filter:function(b,a){b=p(b).toLowerCase();a=
p(a).toLowerCase();return 0<=b.indexOf(a)},data:function(b){return{label:b[d[1]],value:b[d[1]]}}});b.parentNode.style.display="block";a=style=l.getComputedStyle(b);a.maxWidth&&(b.parentNode.style.maxWidth=a.maxWidth);a.minWidth&&(b.parentNode.style.minWidth=a.minWidth);a=function(a){if("keydown"==a.type){if(9!=(a.keyCode||a.which))return;f&&0<f.length&&b.value!=f[0][d[1]]&&(b.value=f[0][d[1]],a.preventDefault())}a=c.value;var e;if(f)for(e=0;e<f.length;e++)if(u(f[e][d[1]])==u(b.value)){e=f[e][d[0]];
c.value=e;b.setAttribute("data-last-value",b.value);c.setAttribute("data-last-value",c.value);c.value!==a&&r(c);return}((e=h||!b.value)?function(){b.value=""}:function(){b.value=b.getAttribute("data-last-value")})();a=c.value;e=e?"":c.getAttribute("data-last-value");c.value=e;c.value!==a?r(c):k&&k.validator&&(a=k(c),(e=a.closest("form").validate())&&e.element(a))};b.addEventListener("blur",a,!1);b.addEventListener("keydown",a,!1);b.addEventListener("awesomplete-selectcomplete",a,!1);b.addEventListener("keyup",
function(a){if(!(b.value.length<q.a)&&(a=a.keyCode||a.which,9!=a&&37!=a&&38!=a&&39!=a&&40!=a&&27!==a&&13!==a)){var c=p(b.value).toLowerCase();if(a=n.get(c))q.list=f=a;else{var d=new XMLHttpRequest;d.open("GET",b.getAttribute("data-url").replace(b.getAttribute("data-url-token"),b.value),!0);d.onload=function(){q.list=f=JSON.parse(d.responseText);n.add(c,f)};d.send()}}},!1);setTimeout(function(){b.focus()})}}});return g})})()})();
